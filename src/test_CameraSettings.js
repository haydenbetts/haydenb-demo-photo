define(["src/CameraSettings"],function(e){module("cameraSettings"),test("auto exposure",function(){var t=new e;t.cameraSpec.lens=[{focalLength:50,maxAperture:2}],equal(t.ISO,800),equal(t.aperture,2),equal(t.shutter,1/16);var n="EV";equal(t.EV(),3,n),t.ISO*=2,equal(t.EV(),2,n),t.shutter/=4,equal(t.EV(),4,n),t.aperture*=2,equal(t.EV(),6,n);var r=function(e,t,n){n=n||"",ok(Math.abs(e-t)<.015,n+", actual: "+e+", expected: "+t)},i=function(e,t,n){n=n||"",ok(Math.abs(Math.log(e)-Math.log(t))/Math.LN2<.015,n+", actual: "+e+", expected: "+t)},s=function(e,n,s,o){t.calculate(e,50),r(t.EV(),e,"EV: "+e+" matches"),i(t.ISO,n,"EV: "+e+", ISO: "+n),i(t.aperture,s,"EV: "+e+", aperture: "+s),i(t.shutter,o,"EV: "+e+", shutter: "+o)};s(-5,6400,2,2),s(-4,6400,2,1),s(-3,6400,2,.5),s(-2,4850,2,.33),s(2,1600,2,1/16),s(7,400,2,1/128),s(8,200,2,1/128),s(9,100,2,1/128),s(10,100,2,1/256),s(11,100,2,1/512),s(13,100,2,1/2048),s(15,100,4,1/2048),s(17,100,8,1/2048),s(17,100,8,1/2048),s(19,100,16,1/2048),s(21,100,32,1/2048)})})